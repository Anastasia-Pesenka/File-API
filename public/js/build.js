//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors

//     Underscore may be freely distributed under the MIT license.

/**
 * @license text 2.0.15 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/text/LICENSE
 */

define("radio",[],function(){var n=function(){this.topics={}};n.prototype={on:function(n,t){this.topics[n]||(this.topics[n]=[]),this.topics[n].push(t)},trigger:function(n,t){!this.topics[n]||this.topics[n].length<1||this.topics[n].map(function(n){n(t)})}};var t=new n;return t}),define("fb",["module","firebase","radio"],function(n,t,e){return{init:function(){t.initializeApp(n.config()),this.authenticated=t.auth().currentUser||null},setupEvents:function(){},setCurrentUser:function(n){this.authenticated=n,e.trigger("auth/changed",n)},getCurrentUser:function(){return this.authenticated},signInGoogle:function(){var n=new t.auth.GoogleAuthProvider;t.auth().signInWithPopup(n).then(function(n){var t=n.user;console.log("Successfully authenticated!"+t.displayName),this.setCurrentUser(t)}.bind(this)).catch(function(n){var t=n.code,e=n.message;console.error(t+e)})},signOut:function(){t.auth().signOut().then(function(){console.log("Successfully sign out!"),this.setCurrentUser(null)}.bind(this)).catch(function(n){console.error(n.message)})}}}),function(){function n(n){function t(t,e,r,i,a,o){for(;a>=0&&a<o;a+=n){var s=i?i[a]:a;r=e(r,t[s],s,t)}return r}return function(e,r,i,a){r=b(r,a,4);var o=!T(e)&&y.keys(e),s=(o||e).length,u=n>0?0:s-1;return arguments.length<3&&(i=e[o?o[u]:u],u+=n),t(e,r,i,o,u,s)}}function t(n){return function(t,e,r){e=k(e,r);for(var i=S(t),a=n>0?0:i-1;a>=0&&a<i;a+=n)if(e(t[a],a,t))return a;return-1}}function e(n,t,e){return function(r,i,a){var o=0,s=S(r);if("number"==typeof a)n>0?o=a>=0?a:Math.max(a+s,o):s=a>=0?Math.min(a+1,s):a+s+1;else if(e&&a&&s)return a=e(r,i),r[a]===i?a:-1;if(i!==i)return a=t(l.call(r,o,s),y.isNaN),a>=0?a+o:-1;for(a=n>0?o:s-1;a>=0&&a<s;a+=n)if(r[a]===i)return a;return-1}}function r(n,t){var e=L.length,r=n.constructor,i=y.isFunction(r)&&r.prototype||s,a="constructor";for(y.has(n,a)&&!y.contains(t,a)&&t.push(a);e--;)a=L[e],a in n&&n[a]!==i[a]&&!y.contains(t,a)&&t.push(a)}var i=this,a=i._,o=Array.prototype,s=Object.prototype,u=Function.prototype,c=o.push,l=o.slice,f=s.toString,p=s.hasOwnProperty,d=Array.isArray,h=Object.keys,v=u.bind,g=Object.create,m=function(){},y=function(n){return n instanceof y?n:this instanceof y?void(this._wrapped=n):new y(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports._=y):i._=y,y.VERSION="1.8.3";var b=function(n,t,e){if(void 0===t)return n;switch(null==e?3:e){case 1:return function(e){return n.call(t,e)};case 2:return function(e,r){return n.call(t,e,r)};case 3:return function(e,r,i){return n.call(t,e,r,i)};case 4:return function(e,r,i,a){return n.call(t,e,r,i,a)}}return function(){return n.apply(t,arguments)}},k=function(n,t,e){return null==n?y.identity:y.isFunction(n)?b(n,t,e):y.isObject(n)?y.matcher(n):y.property(n)};y.iteratee=function(n,t){return k(n,t,1/0)};var x=function(n,t){return function(e){var r=arguments.length;if(r<2||null==e)return e;for(var i=1;i<r;i++)for(var a=arguments[i],o=n(a),s=o.length,u=0;u<s;u++){var c=o[u];t&&void 0!==e[c]||(e[c]=a[c])}return e}},w=function(n){if(!y.isObject(n))return{};if(g)return g(n);m.prototype=n;var t=new m;return m.prototype=null,t},j=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,S=j("length"),T=function(n){var t=S(n);return"number"==typeof t&&t>=0&&t<=A};y.each=y.forEach=function(n,t,e){t=b(t,e);var r,i;if(T(n))for(r=0,i=n.length;r<i;r++)t(n[r],r,n);else{var a=y.keys(n);for(r=0,i=a.length;r<i;r++)t(n[a[r]],a[r],n)}return n},y.map=y.collect=function(n,t,e){t=k(t,e);for(var r=!T(n)&&y.keys(n),i=(r||n).length,a=Array(i),o=0;o<i;o++){var s=r?r[o]:o;a[o]=t(n[s],s,n)}return a},y.reduce=y.foldl=y.inject=n(1),y.reduceRight=y.foldr=n(-1),y.find=y.detect=function(n,t,e){var r;if(r=T(n)?y.findIndex(n,t,e):y.findKey(n,t,e),void 0!==r&&r!==-1)return n[r]},y.filter=y.select=function(n,t,e){var r=[];return t=k(t,e),y.each(n,function(n,e,i){t(n,e,i)&&r.push(n)}),r},y.reject=function(n,t,e){return y.filter(n,y.negate(k(t)),e)},y.every=y.all=function(n,t,e){t=k(t,e);for(var r=!T(n)&&y.keys(n),i=(r||n).length,a=0;a<i;a++){var o=r?r[a]:a;if(!t(n[o],o,n))return!1}return!0},y.some=y.any=function(n,t,e){t=k(t,e);for(var r=!T(n)&&y.keys(n),i=(r||n).length,a=0;a<i;a++){var o=r?r[a]:a;if(t(n[o],o,n))return!0}return!1},y.contains=y.includes=y.include=function(n,t,e,r){return T(n)||(n=y.values(n)),("number"!=typeof e||r)&&(e=0),y.indexOf(n,t,e)>=0},y.invoke=function(n,t){var e=l.call(arguments,2),r=y.isFunction(t);return y.map(n,function(n){var i=r?t:n[t];return null==i?i:i.apply(n,e)})},y.pluck=function(n,t){return y.map(n,y.property(t))},y.where=function(n,t){return y.filter(n,y.matcher(t))},y.findWhere=function(n,t){return y.find(n,y.matcher(t))},y.max=function(n,t,e){var r,i,a=-(1/0),o=-(1/0);if(null==t&&null!=n){n=T(n)?n:y.values(n);for(var s=0,u=n.length;s<u;s++)r=n[s],r>a&&(a=r)}else t=k(t,e),y.each(n,function(n,e,r){i=t(n,e,r),(i>o||i===-(1/0)&&a===-(1/0))&&(a=n,o=i)});return a},y.min=function(n,t,e){var r,i,a=1/0,o=1/0;if(null==t&&null!=n){n=T(n)?n:y.values(n);for(var s=0,u=n.length;s<u;s++)r=n[s],r<a&&(a=r)}else t=k(t,e),y.each(n,function(n,e,r){i=t(n,e,r),(i<o||i===1/0&&a===1/0)&&(a=n,o=i)});return a},y.shuffle=function(n){for(var t,e=T(n)?n:y.values(n),r=e.length,i=Array(r),a=0;a<r;a++)t=y.random(0,a),t!==a&&(i[a]=i[t]),i[t]=e[a];return i},y.sample=function(n,t,e){return null==t||e?(T(n)||(n=y.values(n)),n[y.random(n.length-1)]):y.shuffle(n).slice(0,Math.max(0,t))},y.sortBy=function(n,t,e){return t=k(t,e),y.pluck(y.map(n,function(n,e,r){return{value:n,index:e,criteria:t(n,e,r)}}).sort(function(n,t){var e=n.criteria,r=t.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(e<r||void 0===r)return-1}return n.index-t.index}),"value")};var O=function(n){return function(t,e,r){var i={};return e=k(e,r),y.each(t,function(r,a){var o=e(r,a,t);n(i,r,o)}),i}};y.groupBy=O(function(n,t,e){y.has(n,e)?n[e].push(t):n[e]=[t]}),y.indexBy=O(function(n,t,e){n[e]=t}),y.countBy=O(function(n,t,e){y.has(n,e)?n[e]++:n[e]=1}),y.toArray=function(n){return n?y.isArray(n)?l.call(n):T(n)?y.map(n,y.identity):y.values(n):[]},y.size=function(n){return null==n?0:T(n)?n.length:y.keys(n).length},y.partition=function(n,t,e){t=k(t,e);var r=[],i=[];return y.each(n,function(n,e,a){(t(n,e,a)?r:i).push(n)}),[r,i]},y.first=y.head=y.take=function(n,t,e){if(null!=n)return null==t||e?n[0]:y.initial(n,n.length-t)},y.initial=function(n,t,e){return l.call(n,0,Math.max(0,n.length-(null==t||e?1:t)))},y.last=function(n,t,e){if(null!=n)return null==t||e?n[n.length-1]:y.rest(n,Math.max(0,n.length-t))},y.rest=y.tail=y.drop=function(n,t,e){return l.call(n,null==t||e?1:t)},y.compact=function(n){return y.filter(n,y.identity)};var _=function(n,t,e,r){for(var i=[],a=0,o=r||0,s=S(n);o<s;o++){var u=n[o];if(T(u)&&(y.isArray(u)||y.isArguments(u))){t||(u=_(u,t,e));var c=0,l=u.length;for(i.length+=l;c<l;)i[a++]=u[c++]}else e||(i[a++]=u)}return i};y.flatten=function(n,t){return _(n,t,!1)},y.without=function(n){return y.difference(n,l.call(arguments,1))},y.uniq=y.unique=function(n,t,e,r){y.isBoolean(t)||(r=e,e=t,t=!1),null!=e&&(e=k(e,r));for(var i=[],a=[],o=0,s=S(n);o<s;o++){var u=n[o],c=e?e(u,o,n):u;t?(o&&a===c||i.push(u),a=c):e?y.contains(a,c)||(a.push(c),i.push(u)):y.contains(i,u)||i.push(u)}return i},y.union=function(){return y.uniq(_(arguments,!0,!0))},y.intersection=function(n){for(var t=[],e=arguments.length,r=0,i=S(n);r<i;r++){var a=n[r];if(!y.contains(t,a)){for(var o=1;o<e&&y.contains(arguments[o],a);o++);o===e&&t.push(a)}}return t},y.difference=function(n){var t=_(arguments,!0,!0,1);return y.filter(n,function(n){return!y.contains(t,n)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(n){for(var t=n&&y.max(n,S).length||0,e=Array(t),r=0;r<t;r++)e[r]=y.pluck(n,r);return e},y.object=function(n,t){for(var e={},r=0,i=S(n);r<i;r++)t?e[n[r]]=t[r]:e[n[r][0]]=n[r][1];return e},y.findIndex=t(1),y.findLastIndex=t(-1),y.sortedIndex=function(n,t,e,r){e=k(e,r,1);for(var i=e(t),a=0,o=S(n);a<o;){var s=Math.floor((a+o)/2);e(n[s])<i?a=s+1:o=s}return a},y.indexOf=e(1,y.findIndex,y.sortedIndex),y.lastIndexOf=e(-1,y.findLastIndex),y.range=function(n,t,e){null==t&&(t=n||0,n=0),e=e||1;for(var r=Math.max(Math.ceil((t-n)/e),0),i=Array(r),a=0;a<r;a++,n+=e)i[a]=n;return i};var E=function(n,t,e,r,i){if(!(r instanceof t))return n.apply(e,i);var a=w(n.prototype),o=n.apply(a,i);return y.isObject(o)?o:a};y.bind=function(n,t){if(v&&n.bind===v)return v.apply(n,l.call(arguments,1));if(!y.isFunction(n))throw new TypeError("Bind must be called on a function");var e=l.call(arguments,2),r=function(){return E(n,r,t,this,e.concat(l.call(arguments)))};return r},y.partial=function(n){var t=l.call(arguments,1),e=function(){for(var r=0,i=t.length,a=Array(i),o=0;o<i;o++)a[o]=t[o]===y?arguments[r++]:t[o];for(;r<arguments.length;)a.push(arguments[r++]);return E(n,e,this,this,a)};return e},y.bindAll=function(n){var t,e,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)e=arguments[t],n[e]=y.bind(n[e],n);return n},y.memoize=function(n,t){var e=function(r){var i=e.cache,a=""+(t?t.apply(this,arguments):r);return y.has(i,a)||(i[a]=n.apply(this,arguments)),i[a]};return e.cache={},e},y.delay=function(n,t){var e=l.call(arguments,2);return setTimeout(function(){return n.apply(null,e)},t)},y.defer=y.partial(y.delay,y,1),y.throttle=function(n,t,e){var r,i,a,o=null,s=0;e||(e={});var u=function(){s=e.leading===!1?0:y.now(),o=null,a=n.apply(r,i),o||(r=i=null)};return function(){var c=y.now();s||e.leading!==!1||(s=c);var l=t-(c-s);return r=this,i=arguments,l<=0||l>t?(o&&(clearTimeout(o),o=null),s=c,a=n.apply(r,i),o||(r=i=null)):o||e.trailing===!1||(o=setTimeout(u,l)),a}},y.debounce=function(n,t,e){var r,i,a,o,s,u=function(){var c=y.now()-o;c<t&&c>=0?r=setTimeout(u,t-c):(r=null,e||(s=n.apply(a,i),r||(a=i=null)))};return function(){a=this,i=arguments,o=y.now();var c=e&&!r;return r||(r=setTimeout(u,t)),c&&(s=n.apply(a,i),a=i=null),s}},y.wrap=function(n,t){return y.partial(t,n)},y.negate=function(n){return function(){return!n.apply(this,arguments)}},y.compose=function(){var n=arguments,t=n.length-1;return function(){for(var e=t,r=n[t].apply(this,arguments);e--;)r=n[e].call(this,r);return r}},y.after=function(n,t){return function(){if(--n<1)return t.apply(this,arguments)}},y.before=function(n,t){var e;return function(){return--n>0&&(e=t.apply(this,arguments)),n<=1&&(t=null),e}},y.once=y.partial(y.before,2);var C=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(n){if(!y.isObject(n))return[];if(h)return h(n);var t=[];for(var e in n)y.has(n,e)&&t.push(e);return C&&r(n,t),t},y.allKeys=function(n){if(!y.isObject(n))return[];var t=[];for(var e in n)t.push(e);return C&&r(n,t),t},y.values=function(n){for(var t=y.keys(n),e=t.length,r=Array(e),i=0;i<e;i++)r[i]=n[t[i]];return r},y.mapObject=function(n,t,e){t=k(t,e);for(var r,i=y.keys(n),a=i.length,o={},s=0;s<a;s++)r=i[s],o[r]=t(n[r],r,n);return o},y.pairs=function(n){for(var t=y.keys(n),e=t.length,r=Array(e),i=0;i<e;i++)r[i]=[t[i],n[t[i]]];return r},y.invert=function(n){for(var t={},e=y.keys(n),r=0,i=e.length;r<i;r++)t[n[e[r]]]=e[r];return t},y.functions=y.methods=function(n){var t=[];for(var e in n)y.isFunction(n[e])&&t.push(e);return t.sort()},y.extend=x(y.allKeys),y.extendOwn=y.assign=x(y.keys),y.findKey=function(n,t,e){t=k(t,e);for(var r,i=y.keys(n),a=0,o=i.length;a<o;a++)if(r=i[a],t(n[r],r,n))return r},y.pick=function(n,t,e){var r,i,a={},o=n;if(null==o)return a;y.isFunction(t)?(i=y.allKeys(o),r=b(t,e)):(i=_(arguments,!1,!1,1),r=function(n,t,e){return t in e},o=Object(o));for(var s=0,u=i.length;s<u;s++){var c=i[s],l=o[c];r(l,c,o)&&(a[c]=l)}return a},y.omit=function(n,t,e){if(y.isFunction(t))t=y.negate(t);else{var r=y.map(_(arguments,!1,!1,1),String);t=function(n,t){return!y.contains(r,t)}}return y.pick(n,t,e)},y.defaults=x(y.allKeys,!0),y.create=function(n,t){var e=w(n);return t&&y.extendOwn(e,t),e},y.clone=function(n){return y.isObject(n)?y.isArray(n)?n.slice():y.extend({},n):n},y.tap=function(n,t){return t(n),n},y.isMatch=function(n,t){var e=y.keys(t),r=e.length;if(null==n)return!r;for(var i=Object(n),a=0;a<r;a++){var o=e[a];if(t[o]!==i[o]||!(o in i))return!1}return!0};var I=function(n,t,e,r){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof y&&(n=n._wrapped),t instanceof y&&(t=t._wrapped);var i=f.call(n);if(i!==f.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var a="[object Array]"===i;if(!a){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,s=t.constructor;if(o!==s&&!(y.isFunction(o)&&o instanceof o&&y.isFunction(s)&&s instanceof s)&&"constructor"in n&&"constructor"in t)return!1}e=e||[],r=r||[];for(var u=e.length;u--;)if(e[u]===n)return r[u]===t;if(e.push(n),r.push(t),a){if(u=n.length,u!==t.length)return!1;for(;u--;)if(!I(n[u],t[u],e,r))return!1}else{var c,l=y.keys(n);if(u=l.length,y.keys(t).length!==u)return!1;for(;u--;)if(c=l[u],!y.has(t,c)||!I(n[c],t[c],e,r))return!1}return e.pop(),r.pop(),!0};y.isEqual=function(n,t){return I(n,t)},y.isEmpty=function(n){return null==n||(T(n)&&(y.isArray(n)||y.isString(n)||y.isArguments(n))?0===n.length:0===y.keys(n).length)},y.isElement=function(n){return!(!n||1!==n.nodeType)},y.isArray=d||function(n){return"[object Array]"===f.call(n)},y.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){y["is"+n]=function(t){return f.call(t)==="[object "+n+"]"}}),y.isArguments(arguments)||(y.isArguments=function(n){return y.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(n){return"function"==typeof n||!1}),y.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},y.isNaN=function(n){return y.isNumber(n)&&n!==+n},y.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===f.call(n)},y.isNull=function(n){return null===n},y.isUndefined=function(n){return void 0===n},y.has=function(n,t){return null!=n&&p.call(n,t)},y.noConflict=function(){return i._=a,this},y.identity=function(n){return n},y.constant=function(n){return function(){return n}},y.noop=function(){},y.property=j,y.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},y.matcher=y.matches=function(n){return n=y.extendOwn({},n),function(t){return y.isMatch(t,n)}},y.times=function(n,t,e){var r=Array(Math.max(0,n));t=b(t,e,1);for(var i=0;i<n;i++)r[i]=t(i);return r},y.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},y.now=Date.now||function(){return(new Date).getTime()};var M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},F=y.invert(M),N=function(n){var t=function(t){return n[t]},e="(?:"+y.keys(n).join("|")+")",r=RegExp(e),i=RegExp(e,"g");return function(n){return n=null==n?"":""+n,r.test(n)?n.replace(i,t):n}};y.escape=N(M),y.unescape=N(F),y.result=function(n,t,e){var r=null==n?void 0:n[t];return void 0===r&&(r=e),y.isFunction(r)?r.call(n):r};var R=0;y.uniqueId=function(n){var t=++R+"";return n?n+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var U=/(.)^/,P={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\u2028|\u2029/g,X=function(n){return"\\"+P[n]};y.template=function(n,t,e){!t&&e&&(t=e),t=y.defaults({},t,y.templateSettings);var r=RegExp([(t.escape||U).source,(t.interpolate||U).source,(t.evaluate||U).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(r,function(t,e,r,o,s){return a+=n.slice(i,s).replace(B,X),i=s+t.length,e?a+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=new Function(t.variable||"obj","_",a)}catch(n){throw n.source=a,n}var s=function(n){return o.call(this,n,y)},u=t.variable||"obj";return s.source="function("+u+"){\n"+a+"}",s},y.chain=function(n){var t=y(n);return t._chain=!0,t};var q=function(n,t){return n._chain?y(t).chain():t};y.mixin=function(n){y.each(y.functions(n),function(t){var e=y[t]=n[t];y.prototype[t]=function(){var n=[this._wrapped];return c.apply(n,arguments),q(this,e.apply(y,n))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];y.prototype[n]=function(){var e=this._wrapped;return t.apply(e,arguments),"shift"!==n&&"splice"!==n||0!==e.length||delete e[0],q(this,e)}}),y.each(["concat","join","slice"],function(n){var t=o[n];y.prototype[n]=function(){return q(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}.call(this),define("text",["module"],function(n){"use strict";function t(n,t){return void 0===n||""===n?t:n}function e(n,e,r,i){if(e===i)return!0;if(n===r){if("http"===n)return t(e,"80")===t(i,"80");if("https"===n)return t(e,"443")===t(i,"443")}return!1}var r,i,a,o,s,u=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],c=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f="undefined"!=typeof location&&location.href,p=f&&location.protocol&&location.protocol.replace(/\:/,""),d=f&&location.hostname,h=f&&(location.port||void 0),v={},g=n.config&&n.config()||{};return r={version:"2.0.15",strip:function(n){if(n){n=n.replace(c,"");var t=n.match(l);t&&(n=t[1])}else n="";return n},jsEscape:function(n){return n.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:g.createXhr||function(){var n,t,e;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){e=u[t];try{n=new ActiveXObject(e)}catch(n){}if(n){u=[e];break}}return n},parseName:function(n){var t,e,r,i=!1,a=n.lastIndexOf("."),o=0===n.indexOf("./")||0===n.indexOf("../");return a!==-1&&(!o||a>1)?(t=n.substring(0,a),e=n.substring(a+1)):t=n,r=e||t,a=r.indexOf("!"),a!==-1&&(i="strip"===r.substring(a+1),r=r.substring(0,a),e?e=r:t=r),{moduleName:t,ext:e,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(n,t,i,a){var o,s,u,c=r.xdRegExp.exec(n);return!c||(o=c[2],s=c[3],s=s.split(":"),u=s[1],s=s[0],(!o||o===t)&&(!s||s.toLowerCase()===i.toLowerCase())&&(!u&&!s||e(o,u,t,a)))},finishLoad:function(n,t,e,i){e=t?r.strip(e):e,g.isBuild&&(v[n]=e),i(e)},load:function(n,t,e,i){if(i&&i.isBuild&&!i.inlineText)return void e();g.isBuild=i&&i.isBuild;var a=r.parseName(n),o=a.moduleName+(a.ext?"."+a.ext:""),s=t.toUrl(o),u=g.useXhr||r.useXhr;return 0===s.indexOf("empty:")?void e():void(!f||u(s,p,d,h)?r.get(s,function(t){r.finishLoad(n,a.strip,t,e)},function(n){e.error&&e.error(n)}):t([o],function(n){r.finishLoad(a.moduleName+"."+a.ext,a.strip,n,e)}))},write:function(n,t,e,i){if(v.hasOwnProperty(t)){var a=r.jsEscape(v[t]);e.asModule(n+"!"+t,"define(function () { return '"+a+"';});\n")}},writeFile:function(n,t,e,i,a){var o=r.parseName(t),s=o.ext?"."+o.ext:"",u=o.moduleName+s,c=e.toUrl(o.moduleName+s)+".js";r.load(u,e,function(t){var e=function(n){return i(c,n)};e.asModule=function(n,t){return i.asModule(n,c,t)},r.write(n,u,e,a)},a)}},"node"===g.env||!g.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(i=require.nodeRequire("fs"),r.get=function(n,t,e){try{var r=i.readFileSync(n,"utf8");"\ufeff"===r[0]&&(r=r.substring(1)),t(r)}catch(n){e&&e(n)}}):"xhr"===g.env||!g.env&&r.createXhr()?r.get=function(n,t,e,i){var a,o=r.createXhr();if(o.open("GET",n,!0),i)for(a in i)i.hasOwnProperty(a)&&o.setRequestHeader(a.toLowerCase(),i[a]);g.onXhr&&g.onXhr(o,n),o.onreadystatechange=function(r){var i,a;4===o.readyState&&(i=o.status||0,i>399&&i<600?(a=new Error(n+" HTTP status: "+i),a.xhr=o,e&&e(a)):t(o.responseText),g.onXhrComplete&&g.onXhrComplete(o,n))},o.send(null)}:"rhino"===g.env||!g.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?r.get=function(n,t){var e,r,i="utf-8",a=new java.io.File(n),o=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(a),i)),u="";try{for(e=new java.lang.StringBuffer,r=s.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&e.append(r);null!==(r=s.readLine());)e.append(o),e.append(r);u=String(e.toString())}finally{s.close()}t(u)}:("xpconnect"===g.env||!g.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(a=Components.classes,o=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in a,r.get=function(n,t){var e,r,i,u={};s&&(n=n.replace(/\//g,"\\")),i=new FileUtils.File(n);try{e=a["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),e.init(i,1,0,!1),r=a["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),r.init(e,"utf-8",e.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(e.available(),u),r.close(),e.close(),t(u.value)}catch(n){throw new Error((i&&i.path||"")+": "+n)}}),r}),define("text!templates/menu.html",[],function(){return'<div class="container">\r\n    <div class="nav-right nav-menu">\r\n        <div class="nav-item">\r\n            <div class="field is-grouped">\r\n                <% if (user) {%>\r\n                <a class="nav-item">\r\n                    <%= user.displayName || \'\' %>\r\n                </a>\r\n                <p class="control">\r\n                    <a class="button is-primary sign-out">SignOut</a>\r\n                </p>\r\n                <% } else {%>\r\n                <p class="control">\r\n                    <a class="button is-primary">\r\n                        <span class="icon">\r\n                            <i class="fa fa-google"></i>\r\n                        </span>\r\n                        <span class="google-sign-in"> SignIn</span>\r\n                    </a>\r\n                </p>\r\n                <% } %>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'}),define("modules/menu",["underscore","radio","fb","text!templates/menu.html"],function(n,t,e,r){return{init:function(){this.template=n.template(r),this.el=document.querySelector(".menu"),this.render(),this.setupEvents()},render:function(){var n=arguments[0]||e.getCurrentUser();this.el.innerHTML=this.template({user:n})},setupEvents:function(){t.on("auth/changed",this.changeAuth.bind(this)),this.el.addEventListener("click",function(n){var t=n.target.className.split(" ");t.indexOf("google-sign-in")!==-1&&e.signInGoogle(),t.indexOf("sign-out")!==-1&&e.signOut()})},changeAuth:function(n){this.render(n)}}}),define("util",[],function(){return{generateId:function(){return"id"+(new Date).getTime()}}}),define("text!templates/toDoList.html",[],function(){return'<div class="columns">\r\n    <div class="column is-8 is-offset-2">\r\n        <% if (user) {%>\r\n        <nav class="panel">\r\n            <p class="panel-heading">\r\n                Your To-Do List\r\n            </p>\r\n            <div class="panel-block">\r\n                <p class="control has-icons-left">\r\n                    <input class="input is-small add-task" type="text"\r\n                           placeholder="Please press \'Enter\' to add new task">\r\n                    <span class="icon is-small is-left">\r\n                        <i class="fa fa-tasks"></i>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n            <p class="panel-tabs">\r\n                <a class="all">All</a>\r\n                <a class="completed">Completed</a>\r\n                <a class="uncompleted">Uncompleted</a>\r\n            </p>\r\n            <% for (var id in tasks){ %>\r\n            <label class="panel-block task <% if (tasks[id].completed) print(\' default-back \') %>" data-id="<%= id %>">\r\n                <div>\r\n                    <input type="checkbox" class="task-checkbox" <% if (tasks[id].completed) print(\'checked\') %>>\r\n                    <%= tasks[id].message %>\r\n                </div>\r\n                <button class="delete is-small is-right"></button>\r\n            </label>\r\n            <% } %>\r\n            <div class="panel-block completed-tags">\r\n                <span class="tag is-primary">Completed: <%= completed %></span>\r\n                <span class="tag">Uncompleted: <%= uncompleted %></span>\r\n            </div>\r\n        </nav>\r\n        <% } else { %>\r\n        <figure class="image">\r\n            <img src="img/login.png">\r\n        </figure>\r\n        <% } %>\r\n    </div>\r\n</div>'}),define("modules/toDoList",["underscore","radio","fb","util","text!templates/toDoList.html"],function(n,t,e,r,i){return{init:function(){this.template=n.template(i),this.el=document.querySelector(".to-do-list"),this.setupVariables(),this.setupEvents(),this.render(this.tasks)},setupVariables:function(){this.tasks={},this.currentTab="all",this.calculateSelectiveTasks()},setupEvents:function(){t.on("auth/changed",this.changeAuth.bind(this)),this.el.addEventListener("click",this.clickHandler.bind(this)),this.el.addEventListener("keypress",this.keyHandler.bind(this),!0)},render:function(n){var t=arguments[1]||e.getCurrentUser();this.calculateSelectiveTasks(),this.el.innerHTML=this.template({user:t,tasks:n,completed:this.completedCount,uncompleted:this.uncompletedCount}),this.selectCurrentTab()},selectCurrentTab:function(){var n=this.el.querySelector("."+this.currentTab);n&&n.classList.add("is-active")},calculateSelectiveTasks:function(){if(this.completedCount=0,this.uncompletedCount=0,!n.isEmpty(this.tasks))for(var t in this.tasks)this.tasks.hasOwnProperty(t)&&(this.tasks[t].completed?this.completedCount=++this.completedCount:this.uncompletedCount=++this.uncompletedCount)},changeAuth:function(n){this.render(this.tasks,n)},clickHandler:function(n){n.target.classList.contains("task-checkbox")&&this.selectOrUnSelectTask(n.target),n.target.classList.contains("delete")&&this.deleteTask(n.target.closest(".task")),n.target.classList.contains("completed")&&(this.currentTab="completed",this.showSelectiveTasks(!0)),n.target.classList.contains("uncompleted")&&(this.currentTab="uncompleted",this.showSelectiveTasks(!1)),n.target.classList.contains("all")&&(this.currentTab="all",this.render(this.tasks))},keyHandler:function(n){n.target.classList.contains("add-task")&&13===n.keyCode&&(this.addTask(n.target.value),this.el.querySelector(".add-task").focus())},addTask:function(n){if(n){var t=r.generateId();this.tasks[t]={message:n,completed:!1,id:t},this.render(this.tasks)}},selectOrUnSelectTask:function(n){var t=n.closest(".task").getAttribute("data-id");this.tasks[t].completed=n.checked,this.render(this.tasks)},deleteTask:function(n){var t=n.getAttribute("data-id");delete this.tasks[t],this.render(this.tasks)},showSelectiveTasks:function(n){var t={};for(var e in this.tasks)this.tasks.hasOwnProperty(e)&&this.tasks[e].completed===n&&(t[e]=this.tasks[e]);this.render(t)}}}),define("app",["fb","radio","modules/menu","modules/toDoList"],function(n,t,e,r){return{init:function(){n.init(),e.init(),r.init()}}}),requirejs.config({baseUrl:"js/app",paths:{underscore:"../lib/underscore",text:"../lib/text",firebase:"https://www.gstatic.com/firebasejs/4.1.1/firebase"},shim:{firebase:{exports:"firebase"}},config:{fb:{apiKey:"<API_KEY>",authDomain:"<PROJECT_ID>.firebaseapp.com",databaseURL:"https://<DATABASE_NAME>.firebaseio.com",storageBucket:"<BUCKET>.appspot.com",messagingSenderId:"<SENDER_ID>"}}}),requirejs(["app"],function(n){n.init()}),define("../init",function(){});